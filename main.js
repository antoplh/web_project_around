!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}e.p="";var o=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleCardClick=r},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__title").textContent=this._name,this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__heart").addEventListener("click",(function(){return e._handleHeartCard()})),this._element.querySelector(".card__delete").addEventListener("click",(function(){return e._handleDeleteCard()})),this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick(e._link,e._name)}))}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_handleHeartCard",value:function(){this._element.querySelector(".card__heart").classList.toggle("card__heart_active")}}])&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n},(t=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.remove(this._config.activeButtonClass),t.disabled=!0):(t.classList.add(this._config.activeButtonClass),t.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),n=this._formElement.querySelector(this._config.submitButtonSelector);t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t,n)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),n=this._formElement.querySelector(this._config.submitButtonSelector);t.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState(t,n)}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var p=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popupElement=document.querySelector(t),this._closePopupButton=this._popupElement.querySelector(".form__button-close")},(t=[{key:"open",value:function(){this._popupElement.classList.contains("popup_opened")||(this._popupElement.classList.add("popup_opened"),this._handleEscClose())}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"setEventListeners",value:function(){var e=this;this._handleEscClose(),this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()})),this._closePopupButton.addEventListener("click",(function(){e.close()}))}},{key:"getElement",value:function(){return this._popupElement}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function _(e,t,n,r){var o=h(d(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(null,arguments)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var E=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t,n){return t=d(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}(this,t,[e]))._userInfo=r,o._submitCallback=n,o._form=o._popupElement.querySelector(".form"),o._inputList=o._form.querySelectorAll(".form__input"),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(r=[{key:"open",value:function(){if(_(t,"open",this,3)([]),"#profile-popup"==this._popupSelector&&this._userInfo){var e=this._userInfo.getUserInfo(),n=e.name,r=e.job;this._form.querySelector('input[name="name"]').value=n,this._form.querySelector('input[name="aboutme"]').value=r}}},{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;_(t,"setEventListeners",this,3)([]),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitCallback(e._getInputValues())}))}},{key:"close",value:function(){_(t,"close",this,3)([]),this._form.reset()}}])&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(null,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=O(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,r=[{key:"open",value:function(e,n){var r,o,i,u=this._popupElement.querySelector(".popup__image"),a=this._popupElement.querySelector(".popup__caption");u.src=e,u.alt=n,a.textContent=n,(r=t,o=this,"function"==typeof(i=P(O(1&3?r.prototype:r),"open",o))?function(e){return i.apply(o,e)}:i)([])}}],r&&w(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(p);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function B(e){var t=function(e){if("object"!=q(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var T=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)},(t=[{key:"renderer",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var D=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._nameElement.textContent=t,this._jobElement.textContent=n}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),z=e.p+"87587e34cbae92f132bb.png";document.querySelectorAll(".form__button-close-img").forEach((function(e){e.src=z}));var A=document.querySelector(".profile__edit-button"),W=document.querySelector(".profile__add-button"),U=new D({nameSelector:".profile__name",jobSelector:".profile__description"}),H=new T({items:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"MontaÃ±as Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(e){var t=new o(e,"#card-template",N).generateCard();H.addItem(t)}},".cards");H.renderer();var M=new L("#image-popup");function N(e,t){M.open(e,t)}M.setEventListeners();var Y=new E("#place-popup",(function(e){var t=new o({name:e.title,link:e.url},"#card-template",N).generateCard();H.addItem(t),Y.close()}));Y.setEventListeners();var F=new E("#profile-popup",(function(e){U.setUserInfo({name:e.name,job:e.aboutme}),F.close()}),U);F.setEventListeners();var G={errorClass:"form__input-error_active",inputErrorClass:"form__input_type_error",activeButtonClass:"form__button-save_active",formSelector:".form",submitButtonSelector:".form__button-save",inputSelector:".form__input"},J=new c(G,F.getElement()),K=new c(G,Y.getElement());J.enableValidation(),K.enableValidation(),A.addEventListener("click",(function(){F.open(),J.resetValidation()})),W.addEventListener("click",(function(){Y.open(),K.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUYsR0FDcEJNLEVBQVd0RCxPQUNiLElBQ0FzRCxFQUFXRCxvQkFHWCxJQUFNSyxFQUFlLElBQUl4RCxFQUN2QixrQkFDQSxTQUFDcUQsR0FDQ2xELEVBQVNzRCxZQUFZLENBQ25CN0gsS0FBTXlILEVBQVN6SCxLQUNmaUYsSUFBS3dDLEVBQVNLLFVBRWhCRixFQUFhMUQsT0FDZixHQUNBSyxHQUVGcUQsRUFBYUwsb0JBR2IsSUFBTVEsRUFBbUIsQ0FDdkIzRixXQUFZLDJCQUNaRCxnQkFBaUIseUJBQ2pCVyxrQkFBbUIsMkJBQ25Ca0YsYUFBYyxRQUNkNUUscUJBQXNCLHFCQUN0QkQsY0FBZSxnQkFHWDhFLEVBQXVCLElBQUl6RyxFQUMvQnVHLEVBQ0FILEVBQWFNLGNBRVRDLEVBQXFCLElBQUkzRyxFQUM3QnVHLEVBQ0FQLEVBQVdVLGNBRWJELEVBQXFCRyxtQkFDckJELEVBQW1CQyxtQkFHbkJyQixFQUFrQjdGLGlCQUFpQixTQUFTLFdBQzFDMEcsRUFBYU4sT0FDYlcsRUFBcUJJLGlCQUN2QixJQUVBckIsRUFBZTlGLGlCQUFpQixTQUFTLFdBQ3ZDc0csRUFBV0YsT0FDWGEsRUFBbUJFLGlCQUNyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7IC8vIFBhcmEgdXNhciBQb3B1cFdpdGhJbWFnZVxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydFwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUhlYXJ0Q2FyZCgpKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVIZWFydENhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2hlYXJ0XCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9faGVhcnRfYWN0aXZlXCIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZVBvcHVwQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmZvcm1fX2J1dHRvbi1jbG9zZVwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgLy8gYWJyZSBlbCBwb3B1cFxyXG4gICAgaWYgKCF0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIGNpZXJyYSBlbCBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZSgpIHtcclxuICAgIC8vIGFsbWFjZW5hIGxvZ2ljYSBwYXJhIGNlcnJhciBlbCBwb3B1cCBhbCBwdWxzYXIgZXNjXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBhZ3JlZ2EgdW4gZGV0ZWN0b3IgZGUgZXZlbnRvcyBkZSBjbGljayBhbCBpY29ubyBkZVxyXG4gICAgLy8gY2VycmFyIGVsIHBvcHVwLiBUYW1iaWVuIGxhIHZlbnRhbmEgZGViZSBjZXJyYXJzZVxyXG4gICAgLy8gY3VhbmRvIGVsIHVzdWFyaW8gaGFjZSBjbGljIGVuIGVsIGFyZWEgZnVlcmEgZGVsIGZvcm11bGFyaW9cclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2xvc2VQb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrLCB1c2VySW5mbykge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VySW5mbyA9IHVzZXJJbmZvO1xyXG4gICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgaWYgKHRoaXMuX3BvcHVwU2VsZWN0b3IgPT0gXCIjcHJvZmlsZS1wb3B1cFwiICYmIHRoaXMuX3VzZXJJbmZvKSB7XHJcbiAgICAgIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB0aGlzLl91c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lXCJdJykudmFsdWUgPSBuYW1lO1xyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJhYm91dG1lXCJdJykudmFsdWUgPSBqb2I7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3BlbihpbWFnZVNyYywgaW1hZ2VBbHQpIHtcclxuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGNhcHRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gaW1hZ2VTcmM7XHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gaW1hZ2VBbHQ7XHJcbiAgICBjYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGltYWdlQWx0O1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcmVyKCkge1xyXG4gICAgLy8gUmVuZGVyaXphbW9zIHRvZG9zIGxvcyBlbGVtZW50b3MgcGFzYWRvcyBlbiBgaXRlbXNgXHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIC8vIEHDsWFkaW1vcyB1biBudWV2byBlbGVtZW50byBhbCBjb250ZW5lZG9yXHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5pbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IGNsb3NlQnV0dG9uU3JjIGZyb20gXCIuL2ltYWdlcy9DbG9zZV9JY29uLnBuZ1wiO1xyXG5cclxuY29uc3QgY2xvc2VCdXR0b25JbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2J1dHRvbi1jbG9zZS1pbWdcIik7XHJcblxyXG5jbG9zZUJ1dHRvbkltYWdlcy5mb3JFYWNoKChpbWFnZSkgPT4ge1xyXG4gIGltYWdlLnNyYyA9IGNsb3NlQnV0dG9uU3JjO1xyXG59KTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZFBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gSW5pY2lhbGl6YXIgVXNlckluZm9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbi8vIFJlbmRlcml6YW1vcyBsYXMgdGFyamV0YXMgaW5pY2lhbGVzXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzXCJcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlcmVyKCk7XHJcblxyXG4vLyBQb3B1cCBwYXJhIGltw6FnZW5lc1xyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLXBvcHVwXCIpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhsaW5rLCBuYW1lKSB7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKGxpbmssIG5hbWUpO1xyXG59XHJcblxyXG4vLyBQb3B1cCBwYXJhIGFncmVnYXIgbnVldmEgdGFyamV0YVxyXG5jb25zdCBwbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcGxhY2UtcG9wdXBcIiwgKGZvcm1EYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgeyBuYW1lOiBmb3JtRGF0YS50aXRsZSwgbGluazogZm9ybURhdGEudXJsIH0sXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2tcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICBwbGFjZVBvcHVwLmNsb3NlKCk7XHJcbn0pO1xyXG5wbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBQb3B1cCBwYXJhIGVkaXRhciBwZXJmaWxcclxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1wb3B1cFwiLFxyXG4gIChmb3JtRGF0YSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBmb3JtRGF0YS5uYW1lLFxyXG4gICAgICBqb2I6IGZvcm1EYXRhLmFib3V0bWUsXHJcbiAgICB9KTtcclxuICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gIH0sXHJcbiAgdXNlckluZm9cclxuKTtcclxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBWYWxpZGFjacOzbiBkZSBmb3JtdWxhcmlvc1xyXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBhY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b24tc2F2ZV9hY3RpdmVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uLXNhdmVcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG59O1xyXG5cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIHByb2ZpbGVQb3B1cC5nZXRFbGVtZW50KClcclxuKTtcclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBwbGFjZVBvcHVwLmdldEVsZW1lbnQoKVxyXG4pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBFdmVudG9zIHBhcmEgYWJyaXIgcG9wdXBzXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5hZGRQbGFjZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBsYWNlUG9wdXAub3BlbigpO1xyXG4gIHBsYWNlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVIZWFydENhcmQiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJhY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfdGhpczIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VQb3B1cEJ1dHRvbiIsImNvbnRhaW5zIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwic3VibWl0Q2FsbGJhY2siLCJ1c2VySW5mbyIsIl9jYWxsU3VwZXIiLCJfdXNlckluZm8iLCJfc3VibWl0Q2FsbGJhY2siLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJfaW5oZXJpdHMiLCJfc3VwZXJQcm9wR2V0IiwiX3RoaXMkX3VzZXJJbmZvJGdldFVzIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiYXJndW1lbnRzIiwiaW1hZ2VTcmMiLCJpbWFnZUFsdCIsImltYWdlRWxlbWVudCIsImNhcHRpb25FbGVtZW50IiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX3JlZjIiLCJpbWFnZSIsImNsb3NlQnV0dG9uU3JjIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRQbGFjZUJ1dHRvbiIsImNhcmRTZWN0aW9uIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInBsYWNlUG9wdXAiLCJmb3JtRGF0YSIsInRpdGxlIiwidXJsIiwicHJvZmlsZVBvcHVwIiwic2V0VXNlckluZm8iLCJhYm91dG1lIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZ2V0RWxlbWVudCIsInBsYWNlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldFZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9